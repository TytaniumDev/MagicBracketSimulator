# Firebase App Hosting configuration
runConfig:
  minInstances: 0
  maxInstances: 1
  memory: 512MiB
  cpu: 1
  concurrency: 80

# Environment variables and secrets (single env array per Firebase App Hosting docs)
env:
  - variable: GOOGLE_CLOUD_PROJECT
    value: magic-bracket-simulator
  - variable: GCS_BUCKET
    value: magic-bracket-simulator-artifacts
  - variable: PUBSUB_TOPIC
    value: job-created
  - variable: NODE_ENV
    value: production
  # CORS: allow the deployed frontend (middleware sends one origin per request)
  - variable: CORS_ALLOWED_ORIGINS
    value: https://magic-bracket-simulator.web.app
  # Secrets from Cloud Secret Manager (variable + secret per docs)
  - variable: WORKER_SECRET
    secret: worker-secret
  - variable: MOXFIELD_USER_AGENT
    secret: moxfield-user-agent
  - variable: RESEND_API_KEY
    secret: resend-api-key
  - variable: ADMIN_EMAIL
    secret: admin-email
