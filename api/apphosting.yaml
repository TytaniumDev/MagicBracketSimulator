# Firebase App Hosting configuration
buildConfig:
  rootDirectory: api

runConfig:
  minInstances: 0
  maxInstances: 1
  memory: 512MiB
  cpu: 1
  concurrency: 80

env:
  - variable: GOOGLE_CLOUD_PROJECT
    value: magic-bracket-simulator
  - variable: GCS_BUCKET
    value: magic-bracket-simulator-artifacts
  - variable: PUBSUB_TOPIC
    value: job-created
  - variable: NODE_ENV
    value: production
  # CORS: allow the deployed frontend (middleware sends one origin per request)
  - variable: CORS_ALLOWED_ORIGINS
    value: https://magic-bracket-simulator.web.app

secretEnv:
  - variable: GEMINI_API_KEY
    secret: gemini-api-key
    version: latest
  - variable: WORKER_SECRET
    secret: worker-secret
    version: latest
  - variable: MOXFIELD_USER_AGENT
    secret: moxfield-user-agent
    version: latest
