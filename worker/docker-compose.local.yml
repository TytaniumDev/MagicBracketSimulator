# Local development override — no Pub/Sub, no GCP credentials
# Usage: docker compose -f worker/docker-compose.yml -f worker/docker-compose.local.yml up
services:
  worker:
    ports:
      - "127.0.0.1:9090:9090"
    environment:
      - API_URL=http://host.docker.internal:3000
      - WORKER_API_URL=http://host.docker.internal:9090
      # Override GCP defaults from base compose to force local/polling mode
      - GOOGLE_CLOUD_PROJECT=
      - PUBSUB_SUBSCRIPTION=
      - PUBSUB_WORKER_REPORT_IN_SUBSCRIPTION=
      # Worker auth — must match WORKER_SECRET in api/.env
      - WORKER_SECRET=${WORKER_SECRET:-local-dev-secret}
